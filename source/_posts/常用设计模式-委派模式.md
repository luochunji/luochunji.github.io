---
title: 常用设计模式-委派模式
date: 2019-01-05 18:32:08
tags:
- 设计模式
- 委派模式
categories:
- 设计模式
---

委派（Delegate）模式，有两个类参与处理同一个请求，接受请求的类将请求委托给另一个类（被委派对象）来处理，具有保护被委派对象，隐藏实现细节的功能。委派模式至少必须两个类参与，以聚合取代继承。

<!-- more -->

# 实例

项目外包：A公司从甲方承接了一个工程项目，然后外包给B公司，三个角色：

1. 甲方（调用者）
2. A公司（委派对象）
3. B公司（被委派对象）

```java
public class CompanyB {
    
   public void doSomething(){
      System.out.println("CompanyB doSomething");
   }
}
```

```java
public class CompanyA {
	//实例化CompanyB
	private CompanyB delegate = new CompanyB();
    //真正实施这个工程的是B公司
	public void doSomething(){
		delegate.doSomething();
	}
}
```

测试类

```java
public static void main(String[] args) {
	CompanyA companyA = new CompanyA();
	companyA.doSomething();
}
```

结果

```she&#39;l
CompanyB doSomething
```

# 特点

1. A类（委派类）和B类（被委派类）之间没有继承关系，A类中有一个属性为类B；
2. A类B类有相同的方法和属性

# 与代理模式的区别

代理模式满足两个角色：代理对象和被代理对象，与委派模式很像，但他们区别在于：

1. 代理模式的代理类和被代理类可能有继承关系（cglib代理），委派模式类与类之间不需要继承；
2. 代理类在调用代理类前/后做前置/后置处理，委派模式只是做单纯的调用；
3. 委派模式可以层层委派，比如上例中B公司可以把工程再外包给C公司、C公司再外包给D公司……